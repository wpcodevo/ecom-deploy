const nav=document.querySelector(".nav__menu"),navigation=document.querySelector(".navigation"),openBtn=document.querySelector(".hamburger"),closeBtn=document.querySelector(".close"),navLeft=nav.getBoundingClientRect().left;openBtn.addEventListener("click",()=>{navLeft<0&&(navigation.classList.add("show"),nav.classList.add("show"),document.body.classList.add("show"))}),closeBtn.addEventListener("click",()=>{navLeft<0&&(navigation.classList.remove("show"),nav.classList.remove("show"),document.body.classList.remove("show"))});const navBar=document.querySelector(".navigation"),navHeight=navBar.getBoundingClientRect().height;window.addEventListener("scroll",()=>{window.pageYOffset>navHeight?navBar.classList.add("fix__nav"):navBar.classList.remove("fix__nav")});const links=[...document.querySelectorAll(".scroll-link")];links.map(e=>{e.addEventListener("click",e=>{e.preventDefault();const t=e.target.getAttribute("href").slice(1),n=document.getElementById(t),a=navBar.classList.contains("fix__nav");let i=n.offsetTop-navHeight;a||(i-=navHeight),window.scrollTo({top:i,left:0}),navigation.classList.remove("show"),nav.classList.remove("show"),document.body.classList.remove("show")})}),window.addEventListener("load",()=>{const e=document.getElementById("pre-loader");setTimeout(()=>{e.classList.add("hide")},2e3)});const popup=document.querySelector(".popup"),closePopup=document.querySelector(".popup__close");closePopup.addEventListener("click",()=>{popup.classList.remove("show")}),window.addEventListener("load",()=>{setTimeout(()=>{popup.classList.add("show")},5e3)});const getProducts=async()=>{const e=await fetch("products.json");return(await e.json()).products},displayProducts=(e,t)=>{let n=e.map(({title:e,image:t,price:n})=>`<div class="product">\n          <div class="product__header">\n            <img src=${t} alt="product">\n          </div>\n          <div class="product__footer">\n            <h3>${e}</h3>\n            <div class="rating">\n              <i class="fas fa-star"></i>\n              <i class="fas fa-star"></i>\n              <i class="fas fa-star"></i>\n              <i class="fas fa-star"></i>\n              <i class="far fa-star"></i>\n            </div>\n            <div class="product__price">\n              <h4>$${n}</h4>\n            </div>\n          </div>\n          <ul>\n            <li>\n              <a href="#">\n                <i class="far fa-eye"></i>\n              </a>\n            </li>\n            <li>\n              <a href="#">\n                <i class="far fa-heart"></i>\n              </a>\n            </li>\n            <li>\n              <a href="#">\n                <i class="fas fa-sync"></i>\n              </a>\n            </li>\n          </ul>\n        </div>`);n=n.join(""),t.innerHTML=n},catContainer=document.querySelector(".sort-category"),filterBtns=[...document.querySelectorAll(".filter-btn")];catContainer&&catContainer.addEventListener("click",async e=>{const t=e.target.closest(".section__title");if(!t)return;const n=t.dataset.id,a=await getProducts();if(n){filterBtns.forEach(e=>{e.classList.remove("active")}),t.classList.add("active");const e=a.filter(e=>e.category===n);productCenter.classList.add("animate__animated","animate__backInUp"),setTimeout(()=>{productCenter.classList.remove("animate__animated","animate__backInUp")},1e3),displayProducts(e,productCenter)}});const productCenter=document.querySelector(".product__center"),latestCenter=document.querySelector(".latest__center"),recentCenter=document.querySelector(".recent__center"),shopCenter=document.querySelector(".shop__center"),filterArray=async e=>{return(await getProducts()).filter(t=>t.category===e)};window.addEventListener("DOMContentLoaded",async()=>{const e=await getProducts(),t=await filterArray("trend"),n=await filterArray("latest"),a=await filterArray("recent");displayProducts(t,productCenter),displayProducts(n,latestCenter),displayProducts(a,recentCenter),displayProducts(e,shopCenter)});const glide1=document.getElementById("glide1"),glide2=document.getElementById("glide2"),glide3=document.getElementById("glide3");glide1&&new Glide(glide1,{type:"carousel",startAt:0,autoplay:3e3,hoverpause:!0,perView:1,animationDuration:800,animationTimingFunc:"linear"}).mount(),glide2&&new Glide(glide2,{type:"carousel",startAt:0,perView:5,hoverpause:!1,autoplay:2e3,animationDuration:800,animationTimingFunc:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",breakpoints:{1200:{perView:3},768:{perView:2}}}).mount(),glide3&&new Glide(glide3,{type:"carousel",startAt:0,perView:3,rewin:!1,autoplay:3e3,animationDuration:800,animationTimingFunc:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",breakpoints:{998:{perView:2},768:{perView:1}}}).mount();